import{_ as e,l as t,k as l,m as a,q as s,j as i,u as o,v as n,a as r,w as p,F as d,x as c,C as u,y as h,z as b,A as g,o as y,c as f,B as m,D as w,G as x,H as v,I as S,J as k,K as T,E as V,L as P}from"./index-QNp3o1wa.js";/* empty css                */const C={name:"PublicationView",data:()=>({originPapersInfoList:[],showPapersInfoList:[],bibtexDialogSettings:{dialogVisible:!1,title:"",content:""},yearOptions:[],paperTypeOptions:[],authorTypeOptions:[],selectYears:"",selectPaperTypes:"",selectAuthorTypes:""}),async beforeMount(){const e=await t("publication.json","pages");this.originPapersInfoList=JSON.parse(e),this.init()},components:{DocumentCopy:l},methods:{init(){this.originPapersInfoList.sort(((e,t)=>t.year-e.year));const e=new u,t=new u,l=new u;for(let a of this.originPapersInfoList){e.update(a.year+"");for(let e of a.authorType)t.update(e+"");l.update(a.paperType);for(let e in a.addition)a.addition[e]||delete a.addition[e]}this.yearOptions=e.entries().map((e=>({label:`${e[0]} (${e[1]})`,value:e[0]}))),this.yearOptions.sort(((e,t)=>t.value-e.value)),this.authorTypeOptions=t.entries().map((e=>{let t;return t="1"===e[0]?"1st":"2"===e[0]?"2nd":"3"===e[0]?"3rd":`${e[0]}th`,{label:`${t} Author (${e[1]})`,value:e[0]}})),this.paperTypeOptions=l.entries().map((e=>({label:`${e[0]} (${e[1]})`,value:e[0]}))),this.showPapersInfoList=JSON.parse(JSON.stringify(this.originPapersInfoList))},async additionClickHandle(e,l){if("blog"===e)this.$router.push({name:"blogView",query:{fileName:l}});else if("paper"===e)if(l.startsWith("http")){let e=document.getElementById("downloadLink");e.href=l,e.target="_blank",e.click(),e.href=""}else this.downloadFile(`/${e}/${l}`,l);else if("bib"===e)try{this.bibtexDialogSettings.content=await t(l,e),this.bibtexDialogSettings.dialogVisible=!0,this.bibtexDialogSettings.title="Bibtex"}catch(s){a(s,"error")}},resetDialog(){this.bibtexDialogSettings.dialogVisible=!1,this.bibtexDialogSettings.content="",this.bibtexDialogSettings.title=""},downloadFile(e,t){let l=document.getElementById("downloadLink");l.href=e,l.download=t,l.click(),l.href=""},async copyBibtexCodeHandle(){try{await navigator.clipboard.writeText(this.bibtexDialogSettings.content),a("Copied","success")}catch(e){a("Copy Filed","error")}},searchHandle(){const e=s(this.selectYears),t=s(this.selectPaperTypes),l=s(this.selectAuthorTypes);let i=JSON.parse(JSON.stringify(this.originPapersInfoList));0!==e.length||0!==t.length||0!==l.length?(e.length>0&&(i=i.filter((t=>-1!==e.indexOf(t.year+"")))),t.length>0&&(i=i.filter((e=>-1!==t.indexOf(e.paperType)))),l.length>0&&(i=i.filter((e=>{const t=new Set(l),a=new Set(e.authorType.map((e=>e+"")));return t.intersection(a).size>0}))),this.showPapersInfoList=i,a(`${this.showPapersInfoList.length} records were retrieved`,"success")):this.showPapersInfoList=i}}},D={class:"publication-box"},O={class:"search-part"},I={class:"content-part"},L={class:"outer-box"},_={class:"hyp-link-box"},$=(e=>(x("data-v-0d175291"),e=e(),v(),e))((()=>n("a",{id:"downloadLink",style:{display:"none"}},null,-1))),A={class:"button-area"},H={class:"code-area"};const B=e(C,[["render",function(e,t,l,a,s,u){const x=S,v=h,C=b,B=k,J=T,N=V,Y=i("DocumentCopy"),j=P,F=g;return y(),o(d,null,[n("section",D,[n("section",O,[r(v,{modelValue:s.selectYears,"onUpdate:modelValue":t[0]||(t[0]=e=>s.selectYears=e),filterable:"",style:{width:"150px"},clearable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",placeholder:"Select Year"},{default:p((()=>[(y(!0),o(d,null,c(s.yearOptions,(e=>(y(),f(x,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),r(v,{modelValue:s.selectAuthorTypes,"onUpdate:modelValue":t[1]||(t[1]=e=>s.selectAuthorTypes=e),style:{width:"200px"},filterable:"",clearable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",placeholder:"Select Author Type"},{default:p((()=>[(y(!0),o(d,null,c(s.authorTypeOptions,(e=>(y(),f(x,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),r(v,{modelValue:s.selectPaperTypes,"onUpdate:modelValue":t[2]||(t[2]=e=>s.selectPaperTypes=e),style:{width:"200px"},filterable:"",clearable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",placeholder:"Select Paper Type"},{default:p((()=>[(y(!0),o(d,null,c(s.paperTypeOptions,(e=>(y(),f(x,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),r(C,{type:"primary",onClick:u.searchHandle},{default:p((()=>[m("Search")])),_:1},8,["onClick"])]),n("section",I,[(y(!0),o(d,null,c(s.showPapersInfoList,((e,t)=>(y(),f(N,{shadow:"hover",key:e.title.slice(0,10)},{default:p((()=>[n("section",L,[r(J,{gutter:5},{default:p((()=>[r(B,{span:1},{default:p((()=>[m("["+w(t+1)+"]",1)])),_:2},1024),r(B,null,{default:p((()=>[m(w(e.title),1)])),_:2},1024)])),_:2},1024),n("section",_,[(y(!0),o(d,null,c(e.addition,((e,t)=>(y(),f(C,{key:t,text:"",bg:"",onClick:l=>u.additionClickHandle(t,e)},{default:p((()=>[m(w(t),1)])),_:2},1032,["onClick"])))),128))])])])),_:2},1024)))),128))])]),$,r(F,{class:"bibtex-dialog",modelValue:s.bibtexDialogSettings.dialogVisible,"onUpdate:modelValue":t[3]||(t[3]=e=>s.bibtexDialogSettings.dialogVisible=e),title:s.bibtexDialogSettings.title,width:"550","destroy-on-close":"",onClose:u.resetDialog},{default:p((()=>[n("section",A,[r(j,{onClick:u.copyBibtexCodeHandle},{default:p((()=>[r(Y)])),_:1},8,["onClick"])]),n("section",H,[n("pre",null,w(s.bibtexDialogSettings.content),1)])])),_:1},8,["modelValue","title","onClose"])],64)}],["__scopeId","data-v-0d175291"]]);export{B as default};
